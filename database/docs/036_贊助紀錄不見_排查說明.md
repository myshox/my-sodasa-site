# 贊助紀錄不見 - 排查與修復

## 可能原因

啟用 RLS（034）後，贊助紀錄必須符合下列任一政策才能被看見：

| 身份 | 條件 |
|------|------|
| **會員** | `user_id` = 目前登入者，**或** `email` = 目前登入者信箱 |
| **管理員** | 已登入且 `user_metadata.role` 為 admin 或 super_admin |

若舊資料 `user_id` 為空或與現有帳號不符，就會被擋住。

## 修復步驟

1. 在 **Supabase Dashboard → SQL Editor** 執行 `036_donations_visible_fix.sql`

2. 執行後請**重新整理頁面**，或**重新登入**

3. 若仍看不到，在 SQL Editor 檢查資料是否存在：
   ```sql
   SELECT COUNT(*) FROM donations;
   SELECT id, email, user_id, amount, created_at FROM donations ORDER BY created_at DESC LIMIT 5;
   ```

## 若資料確實存在但仍看不到

- **會員**：確認登入信箱與 `donations.email` 一致（含大小寫）
- **管理員**：確認已登入後台，且帳號在 Auth 的 `raw_user_meta_data` 中有 `role: admin` 或 `super_admin`
