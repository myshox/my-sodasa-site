# 支付確認提醒功能

## 📋 功能概覽

為了確保用戶在完成支付後能正確提交截圖給客服，系統新增了**支付確認提醒對話框**，會在用戶點擊「我已完成支付」或「前往支付頁面」時顯示。

---

## ✨ 主要功能

### 1️⃣ LINE Pay 支付提醒

當用戶完成 LINE Pay 支付並點擊「我已完成支付」按鈕時，會彈出確認對話框：

```
┌────────────────────────────────────────┐
│          📸 重要提醒                    │
├────────────────────────────────────────┤
│ 請確認您已完成以下步驟：                │
│                                        │
│ ✅ 已完成 LINE Pay 支付                │
│                                        │
│ 📸 已截圖本頁面（含訂單編號）          │
│                                        │
│ 💬 請將截圖傳送給 LINE 官方客服：       │
│    [聯繫 LINE 客服] 按鈕               │
│    ⏰ 人工客服時間：10:00 - 18:00      │
│                                        │
│ 💡 傳送截圖後，客服會為您核對並發放金幣 │
│                                        │
│               [我已了解]                │
└────────────────────────────────────────┘
```

**功能要點**：
- ✅ 提醒用戶已完成支付
- 📸 提醒截圖本頁面（含訂單編號）
- 💬 提供 LINE 客服連結（可直接點擊開啟）
- ⏰ 顯示人工客服時間：10:00 - 18:00
- 💡 說明後續流程（客服核對後發放金幣）

---

### 2️⃣ SHOPLINE 支付提醒

當用戶選擇 SHOPLINE 並點擊「前往外部支付頁面」按鈕時，會先顯示提醒：

```
┌────────────────────────────────────────┐
│       即將前往付款頁面                  │
├────────────────────────────────────────┤
│ 點擊確認後將開啟外部支付頁面            │
│                                        │
│ 📸 完成支付後，請記得：                │
│    1. 截圖本頁面（含訂單編號）         │
│    2. 截圖支付成功畫面                 │
│                                        │
│ 💬 將截圖傳送給 LINE 官方客服           │
│    [聯繫 LINE 客服] 按鈕               │
│    ⏰ 人工客服時間：10:00 - 18:00      │
│                                        │
│               [確認前往]                │
└────────────────────────────────────────┘
```

**功能要點**：
- 📸 提醒截圖兩個畫面（本頁面 + 支付成功頁面）
- 💬 提供 LINE 客服連結
- ⏰ 顯示人工客服時間
- ⚠️ 在前往支付前先提醒，避免用戶忘記

---

## 🎨 視覺設計

### 顏色區塊分類

1. **綠色區塊**（成功/完成）
   - 背景：`bg-green-50`
   - 邊框：`border-green-500`
   - 用途：顯示已完成的步驟

2. **黃色區塊**（重要提醒）
   - 背景：`bg-yellow-50`
   - 邊框：`border-yellow-500`
   - 用途：提醒截圖等重要動作

3. **藍色區塊**（行動按鈕）
   - 背景：`bg-blue-50`
   - 邊框：`border-blue-500`
   - 用途：提供客服聯繫方式

### LINE 客服按鈕

```jsx
<a href="https://line.me/ti/p/mNL9exXRFd" 
   target="_blank" 
   rel="noopener noreferrer" 
   className="inline-flex items-center gap-2 px-3 py-2 bg-line-500 text-white rounded-lg text-sm font-bold hover:bg-line-600 transition-colors">
    <MessageSquare size={16} />
    聯繫 LINE 客服
    <ExternalLink size={14} />
</a>
```

- 使用 LINE 品牌綠色 (`bg-line-500`)
- 包含訊息圖標和外部連結圖標
- Hover 效果更深的綠色

---

## 🔧 技術實作

### 使用 `showConfirm` 函數

```jsx
showConfirm(
    '📸 重要提醒',           // 標題
    <div>...</div>,          // 內容（支援 JSX）
    () => {                  // 確認後的回調函數
        onClose();
        showToast('請記得將截圖傳送給 LINE 客服唷！', 'success');
    },
    '我已了解'              // 確認按鈕文字
);
```

### 關鍵代碼結構

```jsx
<Button onClick={() => {
    showConfirm(
        '標題',
        <div className="text-left space-y-3">
            {/* 步驟提醒 */}
            <div className="bg-green-50 border-l-4 border-green-500 p-3 rounded">
                <p>✅ 已完成支付</p>
            </div>
            
            {/* 截圖提醒 */}
            <div className="bg-yellow-50 border-l-4 border-yellow-500 p-3 rounded">
                <p>📸 已截圖本頁面（含訂單編號）</p>
            </div>
            
            {/* 客服聯繫 */}
            <div className="bg-blue-50 border-l-4 border-blue-500 p-3 rounded space-y-2">
                <p>💬 請將截圖傳送給 LINE 官方客服：</p>
                <a href="LINE客服連結" target="_blank">
                    聯繫 LINE 客服
                </a>
                <p>⏰ 人工客服時間：10:00 - 18:00</p>
            </div>
        </div>,
        () => { /* 確認後執行 */ },
        '我已了解'
    );
}}>
    我已完成支付
</Button>
```

---

## 📊 使用者流程

### LINE Pay 流程

```
用戶選擇 LINE Pay
    ↓
掃描 QR Code 並支付
    ↓
點擊「我已完成支付」
    ↓
【彈出提醒對話框】
    ↓
確認步驟（支付✅、截圖📸、聯繫客服💬）
    ↓
點擊「我已了解」
    ↓
關閉彈窗，顯示成功提示
    ↓
用戶將截圖傳送給 LINE 客服
    ↓
客服核對並發放金幣
```

### SHOPLINE 流程

```
用戶選擇 SHOPLINE
    ↓
點擊「前往外部支付頁面」
    ↓
【彈出提醒對話框】
    ↓
查看注意事項（截圖提醒、客服資訊）
    ↓
點擊「確認前往」
    ↓
開啟外部支付頁面（新分頁）
    ↓
完成支付後截圖
    ↓
將截圖傳送給 LINE 客服
    ↓
客服核對並發放金幣
```

---

## 🎯 功能優勢

### 1. 減少客服負擔
- 自動提醒用戶截圖
- 明確說明需要截圖的內容（含訂單編號）
- 減少用戶忘記截圖的情況

### 2. 提升用戶體驗
- 清晰的步驟指引
- 一鍵開啟 LINE 客服對話
- 顯示客服服務時間，避免非營業時間的困擾

### 3. 提高對帳效率
- 確保用戶提供訂單編號截圖
- 客服可快速核對訂單
- 減少來回確認的溝通成本

### 4. 防止糾紛
- 明確告知後續流程
- 用戶知道需要聯繫客服才能領取金幣
- 減少「為什麼還沒收到金幣」的問題

---

## 📱 響應式設計

對話框內容使用 `text-left` 和 `space-y-3`，確保在手機和桌面版都能清晰閱讀：

- **手機版**：垂直排列，區塊間距適中
- **桌面版**：同樣清晰，不會過於寬鬆或緊湊
- **按鈕**：使用 `inline-flex` 確保圖標和文字對齊

---

## 🚀 未來擴展

可考慮的優化方向：

1. **自動複製訂單編號**
   - 在彈窗中自動將訂單編號複製到剪貼簿

2. **倒數計時提醒**
   - 顯示「請在 24 小時內聯繫客服」等時間提醒

3. **客服狀態顯示**
   - 顯示客服是否在線（需要後端支援）

4. **快速填寫範本**
   - 提供「複製訊息範本」按鈕，方便用戶貼上給客服

5. **進度追蹤**
   - 用戶可在個人頁面查看訂單處理進度

---

## ✅ 測試檢查清單

部署後請測試：

- [ ] LINE Pay 支付完成後點擊按鈕，確認彈窗正確顯示
- [ ] SHOPLINE 點擊前往支付時，確認彈窗正確顯示
- [ ] 點擊「聯繫 LINE 客服」按鈕，確認開啟正確的 LINE 連結
- [ ] 確認對話框在手機版和桌面版都正常顯示
- [ ] 確認「人工客服時間：10:00 - 18:00」文字正確顯示
- [ ] 點擊「我已了解」或「確認前往」後，確認彈窗正常關閉

---

## 📝 客服時間資訊

**人工客服服務時間：10:00 - 18:00**

- 此時間會顯示在所有支付提醒對話框中
- 建議在非營業時間顯示「客服已下班」提示（未來擴展）
- 可考慮新增週末/假日的特殊說明

---

## 🎉 使用效果

### 用戶視角
用戶完成支付後，系統會清楚提醒需要截圖並聯繫客服，避免遺漏重要步驟，提升整體體驗。

### 客服視角
客服會收到包含訂單編號的完整截圖，可以快速核對並處理，大幅提升工作效率。

---

**實作完成！** 🎊
