# 資料載入速度優化

## 已實作改善

### 1. Events 輕量查詢
- **首頁 marquee**：僅載入 `id, title, tag, timestamp`，**不載入 content**（可能含大量 Base64 圖片）
- **效益**：首頁載入時 events 請求體積大幅縮小

### 2. 限制筆數
- 首頁 events：最多 15 筆
- 活動頁：最多 50 筆
- 彈窗：最多 10 筆
- 後台：最多 100 筆

### 3. Admin 平行載入
- donations、events、playlist 改為 `Promise.all` 平行請求
- 效益：後台載入時間約可縮短至原本的 1/3

## 其他建議（可選）

### Supabase 逾時調整
若仍常逾時，可執行：
```sql
ALTER ROLE anon SET statement_timeout = '15s';
NOTIFY pgrst, 'reload config';
```

### 專案保持活躍
- 免費方案久未使用會暫停，冷啟動較慢
- 可定期 ping 或考慮升級 Pro

### 資料庫索引
確認常用查詢有索引：
```sql
-- events
CREATE INDEX IF NOT EXISTS idx_events_created_at ON events(created_at DESC);
CREATE INDEX IF NOT EXISTS idx_events_timestamp ON events(timestamp DESC);

-- donations  
CREATE INDEX IF NOT EXISTS idx_donations_created_at ON donations(created_at DESC);
```
