# 註冊用戶管理功能說明

## 功能概述

為後台管理系統新增「註冊用戶」標籤頁，讓超級管理員可以查看所有註冊用戶的資訊。

## 主要功能

### 1. 註冊用戶列表
- 顯示所有註冊用戶的 Email、角色、註冊時間、用戶 ID
- 按註冊時間排序（最新的在前）
- 表格式呈現，支援響應式設計

### 2. 統計資訊
顯示四個統計卡片：
- **總用戶數**：所有註冊用戶的數量
- **超級管理員**：擁有 super_admin 角色的用戶數
- **管理員**：擁有 admin 角色的用戶數
- **一般玩家**：沒有特殊角色的普通用戶數

### 3. 角色標籤
用戶列表中會以不同顏色標示角色：
- 🟣 **超級管理員**（紫色）
- 🟡 **管理員**（金色）
- ⚪ **一般玩家**（灰色）

## 權限控制

- **僅超級管理員可見**：此功能只有 `super_admin` 角色的用戶可以訪問
- 使用 `get_all_users()` RPC 函數安全地查詢用戶資料
- 不暴露敏感資訊（如密碼）

## 資料來源

使用 Supabase RPC 函數 `get_all_users()`：
```sql
SELECT 
    u.id,
    u.email,
    u.created_at,
    u.raw_user_meta_data->>'role' as role
FROM auth.users u
ORDER BY u.created_at DESC;
```

## UI 位置

- 後台管理 → **註冊用戶** 標籤（藍色按鈕，Users 圖標）
- 位於「活動攻略」和「超管」之間

## 技術實現

### 前端
- 新增 `allUsers` 狀態存儲所有用戶資料
- 新增 `useEffect` 在切換到 `registered_users` 標籤時自動載入資料
- 新增完整的 UI 呈現（統計卡片 + 資料表格）

### 資料庫
- 無需額外的資料庫修改
- 複用現有的 `get_all_users()` RPC 函數

## 使用說明

1. 以超級管理員身份登入後台
2. 點擊頂部導航的「註冊用戶」按鈕
3. 查看所有註冊用戶的資訊和統計數據
4. 可以快速了解：
   - 有多少用戶註冊
   - 有多少管理員
   - 最近註冊的用戶

## 後續可擴展功能

- 搜尋/篩選用戶（按 Email、角色）
- 分頁顯示（當用戶數量很多時）
- 匯出用戶列表為 CSV
- 查看用戶的詳細資訊（最後登入時間、贊助記錄等）
- 直接從此頁面設定用戶為管理員

---

**更新時間**：2026-02-01
**版本**：1.0.0
