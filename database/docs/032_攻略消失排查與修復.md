# 攻略不見了？排查與修復

## 一、先確認資料是否還在

在 **Supabase Dashboard → SQL Editor** 執行：

```sql
-- 查看所有攻略（不限狀態）
SELECT id, title, status, created_at, author_name
FROM guides
ORDER BY created_at DESC;
```

- **有列出資料**：代表資料還在，多半是顯示條件問題（見下方）
- **無資料**：可能曾被刪除，或 `author_id` 對應的帳號被刪除（ON DELETE CASCADE 會一併刪除攻略）

---

## 二、常見原因：狀態為「草稿」

前台只會顯示 `status = 'published'` 的攻略。若當初儲存時選了「草稿」，前台就看不到。

### 檢查各狀態數量

```sql
SELECT status, COUNT(*) 
FROM guides 
GROUP BY status;
```

### 把所有攻略改成「已發布」

若確定要讓所有攻略都顯示在前台，可執行：

```sql
UPDATE guides
SET status = 'published',
    publish_date = COALESCE(publish_date, created_at)
WHERE status IN ('draft', 'archived');
```

執行後重新整理前台頁面即可。

---

## 三、後台能否看到攻略？

- 登入後台 → 活動攻略 → 若有看到攻略列表，代表資料存在
- 若前台沒有顯示，多半是狀態為草稿，可用上面 SQL 批次改為 `published`
- 若後台也看不到，請用「一」的 SQL 檢查資料是否存在

---

## 四、其他可能原因

| 情況 | 說明 |
|------|------|
| 載入失敗 | 網路或 AbortError 時會顯示空列表，實際資料還在，可重試或檢查網路 |
| 帳號被刪除 | `guides.author_id` 設為 `ON DELETE CASCADE`，若對應 auth 帳號被刪除，攻略會被一併刪除 |
| 專案切換 | 確認連到正確的 Supabase 專案 |
